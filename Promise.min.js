(function(e){function g(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];l(a,g(m,this),g(h,this))}function n(a){var b=this;null===this._state?this._deferreds.push(a):q(function(){var f=b._state?a.onFulfilled:a.onRejected;if(null===f)(b._state?a.resolve:a.reject)(b._value);else{var d;try{d=f(b._value)}catch(c){a.reject(c);
	return}a.resolve(d)}})}function m(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"===typeof a||"function"===typeof a)){var b=a.then;if("function"===typeof b){l(g(b,a),g(m,this),g(h,this));return}}this._state=!0;this._value=a;p.call(this)}catch(f){h.call(this,f)}}function h(a){this._state=!1;this._value=a;p.call(this)}function p(){for(var a=0,b=this._deferreds.length;a<b;a++)n.call(this,this._deferreds[a]);this._deferreds=null}function r(a,b,f,d){this.onFulfilled=
	"function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.resolve=f;this.reject=d}function l(a,b,f){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,f(a))})}catch(c){d||(d=!0,f(c))}}if(!e.Promise){"undefined"!==typeof module&&module.exports?module.exports=c:e.Promise=c;var q=e&&e.setImmediate||function(a){setTimeout(a,0)};c.prototype["catch"]=function(a){return this.then(null,a)};c.prototype.then=function(a,b){var f=this;return new c(function(d,c){n.call(f,new r(a,
	b,d,c))})};c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(e,k){try{if(k&&("object"===typeof k||"function"===typeof k)){var h=k.then;if("function"===typeof h){h.call(k,function(a){d(e,a)},c);return}}a[e]=k;0===--g&&b(a)}catch(l){c(l)}}if(0===a.length)return b([]);for(var g=a.length,e=0;e<a.length;e++)d(e,a[e])})};c.resolve=function(a){return new c(function(b){b(a)})};c.reject=function(a){return new c(function(b,
																																																																																																																																				   c){c(a)})};c.race=function(a){return new c(function(b,c){a.map(function(a){a.then(b,c)})})}}})(this);